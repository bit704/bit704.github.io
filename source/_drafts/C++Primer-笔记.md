---
title: 《C++ Primer（中文版）（第5版）》笔记
categories: [Notebook]
tags: [C++]
index_img: https://cdn.jsdelivr.net/gh/bit704/blog-image-bed@main/image/2022-09-18-C++Primer.jpg
banner_img: https://cdn.jsdelivr.net/gh/bit704/blog-image-bed@main/image/2022-09-18-C++Primer.jpg
---

原书作者      *Stanley B·Lippman      Josée Lajoie      Barbara E·Moo*

<!--more-->

译者 王刚 杨巨峰

电子工业出版社

![封面](https://cdn.jsdelivr.net/gh/bit704/blog-image-bed@main/image/2022-09-18-C++Primer_s.jpg)

[toc]

## 推荐序1

第5版之于2011版标准，如同第3版之于1998版标准，必将成为经典的学习读本。

第5版则更加像一本学习教程，由浅入深，并结合大量代码实例来讲述C++语法和标准库。

学习语言的一个境界是把自己想象成编译器。

本书的另一个特色是将C++的语法和标准库融为一体来介绍。C++标准库本身就是C++语法的最佳样例，其中包含不少C++高级特性的指导性用法。在我的程序设计经历中，有些C++语言特性（比如虚拟继承），我只在标准库中看到过实用做法。

在实践中，不必全面地使用C++语言的各种特性，而应根据工程项目的实际情况，适当取舍（譬如动态类型信息、虚拟继承、异常等特性的使用很值得商榷）。通常只鼓励使用C++语言的一个子集就够了，一个值得学习和参考的例子是Google发布的Google C++ Style Guide。

## 推荐序2

编译器实现的速度也令人惊喜。短短两年时间，从开源的GCC、LLVM到专有的Visual C++和Intel C++，对于新标准的追踪之快，覆盖之全，与当年C++98标准颁布之后迟迟不能落地的窘境相比，可谓对比强烈。

一种优秀的编程语言，一定要对于计算这件事情实现一个完整和自洽的抽象。

而C语言之所以四十年长盛不衰，根本在于它对于现代计算机提供了一个底层的高级抽象：凡是比它低的抽象都过于简陋，凡是比它高的抽象都可以用C语言构造出来。

每当你需要走下去直接与硬件对话时，C++成为C之外唯一有效率的选择。

C++同时支持4种不同的编程风格：C风格、基于对象、面向对象和泛型。事实上，把微软的COM也算进来的话，还可以加上一种“基于组件”的风格。

每一个具体的技术领域，只需要读四五本书就够了。以前的C++是个例外，因为语言设计有缺陷，所以要读很多书才知道如何绕过缺陷。现在的C++11完全可以了，大家读四五本书就可以达到合格的水平，这恰恰是语言进步的体现。

本书是这四五本中的一本，而且是“教程+参考书”，扛梁之作，初学者的不二法门。另一本是《C++标准程序库》，对于C++熟手来说更为快捷。Scott Meyers的Effective C++永远是学习C++者必读的，只不过这本书的第4版不知道什么时候出来。Anthony Williams的C++ Concurrency in Action是学习用标准C++开发并发程序的最佳选择。国内的作品，我则高度推荐陈硕的《Linux多线程服务端编程》。这本书的名字赶跑了不少潜在的读者，所以我要特别说明一下。这本书是C++开发的高水平作品，与其说是教你怎么用C++写服务端开发，不如说是教你如何以服务端开发为例子提升C++开发水平。前面几本书都是谈标准C++自己的事情，碰到像iostream这样失败的标准组件也不得不硬着头皮介绍。而这本书是接地气的实践结晶，告诉你面对具体问题时应怎样权衡，C++里什么好用，什么不好用，为什么，等等。

## 前言

2011年，C++标准委员会发布了ISO C++标准的一个重要修订版。此修订版是C++进化过程中的最新一步，延续了前几个版本对编程效率的强调。新标准的主要目标是：

- 使语言更为统一，更易于教学。
- 使标准库更简单、安全、使用更高效。
- 使编写高效率的抽象和库变得更简单。

现代C++语言可以看作是三部分组成的：

- 低级语言，大部分继承自C语言。
- 现代高级语言特性，允许我们定义自己的类型以及组织大规模程序和系统。
- 标准库，它利用高级特性来提供有用的数据结构和算法。

[扩展示例的源码](http://www.informit.com/title/0321714113)，在书本下方的download选项卡里下载。

## 第1章  开始

### 1.1 编写一个简单的C++程序

一个**函数的定义**包含四部分：返回类型（return type）、函数名（function name）、一个括号包围的形参列表（parameter list，允许为空）以及函数体（function body）。

在大多数系统中，main的返回值被用来指示状态。返回值0表明成功，非0的返回值的含义由系统定义，通常用来指出错误类型。

**命令行运行编译器**：

```bash
$ CC prog1.cc
```

CC是编译器程序的名字，\$是系统提示符。编译器生成一个可执行文件。Windows系统会将这个可执行文件命名为prog1.exe。UNIX系统中的编译器通常将可执行文件命名为a.out。在Windows下执行可以忽略其扩展名.exe，在一些系统中需要用$./$显式指出其位于当前目录。

访问main的返回值的方法依赖于系统。在UNIX和Windows系统中，执行完一个程序后，都可以通过echo命令获得其返回值。

```bash
# 在UNIX系统中，通过如下命令获得状态：
$ echo $?
# 在Windows系统中查看状态可键入：
$ echo %ERRORLEVEL%
```

默认情况下，运行GNU编译器的命令是g++：

```bash
$ g++ -o prog1 prog1.cc
```

\-o prog1是编译器参数，指定了可执行文件的文件名。在不同的操作系统中，此命令生成一个名为prog1或prog1.exe的可执行文件。在UNIX系统中，可执行文件没有后缀；在Windows系统中，后缀为.exe。如果省略了-o prog1参数，在UNIX系统中编译器会生成一个名为a.out的可执行文件，在Windows系统中则会生成一个名为a.exe的可执行文件。

根据使用的GNU编译器的版本，你可能需要指定-std=c++0x参数来打开对C++11的支持。

### 1.2 初识输入输出





